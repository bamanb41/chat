{
  "version": 3,
  "file": "bundle.css",
  "sources": [
    "../../App.svelte"
  ],
  "sourcesContent": [
    "<script>\n  import { beforeUpdate, afterUpdate, onMount } from \"svelte\";\n  import { store } from \"./gun-store\";\n  import { user } from \"./user-store.js\";\n  import { fade } from \"svelte/transition\";\n\n  $: others = [\n    ...new Set($store.map(msg => msg.user).filter(usr => usr && usr !== $user))\n  ].join(\", \");\n\n  let msgInput;\n  let div;\n  let autoscroll;\n\n  beforeUpdate(() => {\n    autoscroll =\n      div && div.offsetHeight + div.scrollTop < div.scrollHeight + 50;\n  });\n\n  afterUpdate(() => {\n    if (autoscroll) div.scrollTo(0, div.scrollHeight - 50);\n  });\n\n  onMount(() => {\n    if (div) div.scrollTo(0, div.scrollHeight - 50);\n  });\n</script>\n\n<style>\n  main {\n    display: flex;\n    flex-direction: column;\n    height: 100%;\n    max-width: 450px;\n  }\n\n  @media (max-width: 640px) {\n    main {\n      max-width: 100%;\n    }\n  }\n\n  .scrollable {\n    flex: 1 1 auto;\n    border-top: 1px solid #eee;\n    margin: 0 0 0.5em 0;\n    padding-right: 1em;\n    overflow-y: auto;\n  }\n\n  article {\n    margin: 1.5em 0;\n  }\n\n  .msg {\n    position: relative;\n    line-height: 2;\n    padding: 0.5em 2.5em 0.5em 2em;\n    user-select: none;\n    background-color: #eee;\n    border-radius: 1em 1em 1em 0;\n  }\n\n  .user {\n    text-align: right;\n  }\n\n  .user > .msg {\n    background-color: #0074d9;\n    color: white;\n    border-radius: 1em 1em 0 1em;\n  }\n\n  .msg:hover button {\n    opacity: 1;\n  }\n\n  button.delete {\n    position: absolute;\n    top: 0;\n    right: 0.2em;\n    width: 2em;\n    height: 100%;\n    background: no-repeat 50% 50% url(/trash.svg);\n    background-size: 1.4em 1.4em;\n    border: none;\n    opacity: 0;\n    transition: opacity 0.2s;\n    text-indent: -9999px;\n    cursor: pointer;\n  }\n\n  input {\n    padding: 0.5em;\n    border-radius: 1em;\n  }\n\n  .msg-input {\n    width: 100%;\n  }\n\n  .submit-form {\n    position: relative;\n  }\n\n  .submit {\n    position: absolute;\n    top: 0.3em;\n    right: 0.3em;\n    width: 1.5em;\n    height: 1.5em;\n    background: no-repeat 50% 50% url(/up.svg);\n    background-size: 0.75em;\n    border: none;\n    border-radius: 50%;\n    background-color: #0074d9;\n    text-indent: -9999px;\n    cursor: pointer;\n  }\n\n  .meta {\n    font-size: 10px;\n    margin: 0.5em;\n  }\n\n  .user-input {\n    position: relative;\n    width: 100%;\n  }\n</style>\n\n<main>\n  {#if !$user}\n    <h1 id=\"name-label\">Enter your name</h1>\n    <form\n      class=\"user-input\"\n      on:submit|preventDefault={e => {\n        const userInput = e.target.user.value;\n        if (!userInput) return;\n        $user = userInput;\n      }}>\n      <input\n        placeholder=\"Steve Jobs\"\n        aria-labelledby=\"name-label\"\n        name=\"user\"\n        class=\"user-input\" />\n      <input class=\"submit\" type=\"submit\" value=\"Send\" in:fade out:fade />\n    </form>\n  {:else}\n    <h1>To: {others}</h1>\n    <div class=\"scrollable\" bind:this={div}>\n      {#each $store as val (val.msgId)}\n        <article class:user={val.user === $user} out:fade>\n          <div class=\"meta\">\n            <span class=\"time\">\n              {new Date(val.time).toLocaleString('en-US')}\n            </span>\n            <span class=\"user\">{val.user}</span>\n          </div>\n          <span class=\"msg\">\n            {val.msg}\n            <button\n              class=\"delete\"\n              on:click|preventDefault={e => {\n                store.delete(val.msgId);\n              }}>\n              delete\n            </button>\n          </span>\n        </article>\n      {/each}\n    </div>\n\n    <form\n      class=\"submit-form\"\n      method=\"get\"\n      on:submit|preventDefault={() => {\n        if (!msgInput) return;\n        $store = { msg: msgInput, user: $user };\n        msgInput = '';\n      }}>\n      <input class=\"msg-input\" type=\"text\" name=\"msg\" bind:value={msgInput} />\n      {#if msgInput}\n        <input class=\"submit\" type=\"submit\" value=\"Send\" in:fade out:fade />\n      {/if}\n    </form>\n  {/if}\n</main>\n"
  ],
  "names": [],
  "mappings": "AA6BE,IAAI,8BAAC,CAAC,AACJ,OAAO,CAAE,IAAI,CACb,cAAc,CAAE,MAAM,CACtB,MAAM,CAAE,IAAI,CACZ,SAAS,CAAE,KAAK,AAClB,CAAC,AAED,MAAM,AAAC,YAAY,KAAK,CAAC,AAAC,CAAC,AACzB,IAAI,8BAAC,CAAC,AACJ,SAAS,CAAE,IAAI,AACjB,CAAC,AACH,CAAC,AAED,WAAW,8BAAC,CAAC,AACX,IAAI,CAAE,CAAC,CAAC,CAAC,CAAC,IAAI,CACd,UAAU,CAAE,GAAG,CAAC,KAAK,CAAC,IAAI,CAC1B,MAAM,CAAE,CAAC,CAAC,CAAC,CAAC,KAAK,CAAC,CAAC,CACnB,aAAa,CAAE,GAAG,CAClB,UAAU,CAAE,IAAI,AAClB,CAAC,AAED,OAAO,8BAAC,CAAC,AACP,MAAM,CAAE,KAAK,CAAC,CAAC,AACjB,CAAC,AAED,IAAI,8BAAC,CAAC,AACJ,QAAQ,CAAE,QAAQ,CAClB,WAAW,CAAE,CAAC,CACd,OAAO,CAAE,KAAK,CAAC,KAAK,CAAC,KAAK,CAAC,GAAG,CAC9B,WAAW,CAAE,IAAI,CACjB,gBAAgB,CAAE,IAAI,CACtB,aAAa,CAAE,GAAG,CAAC,GAAG,CAAC,GAAG,CAAC,CAAC,AAC9B,CAAC,AAED,KAAK,8BAAC,CAAC,AACL,UAAU,CAAE,KAAK,AACnB,CAAC,AAED,oBAAK,CAAG,IAAI,eAAC,CAAC,AACZ,gBAAgB,CAAE,OAAO,CACzB,KAAK,CAAE,KAAK,CACZ,aAAa,CAAE,GAAG,CAAC,GAAG,CAAC,CAAC,CAAC,GAAG,AAC9B,CAAC,AAED,mBAAI,MAAM,CAAC,MAAM,eAAC,CAAC,AACjB,OAAO,CAAE,CAAC,AACZ,CAAC,AAED,MAAM,OAAO,8BAAC,CAAC,AACb,QAAQ,CAAE,QAAQ,CAClB,GAAG,CAAE,CAAC,CACN,KAAK,CAAE,KAAK,CACZ,KAAK,CAAE,GAAG,CACV,MAAM,CAAE,IAAI,CACZ,UAAU,CAAE,SAAS,CAAC,GAAG,CAAC,GAAG,CAAC,IAAI,UAAU,CAAC,CAC7C,eAAe,CAAE,KAAK,CAAC,KAAK,CAC5B,MAAM,CAAE,IAAI,CACZ,OAAO,CAAE,CAAC,CACV,UAAU,CAAE,OAAO,CAAC,IAAI,CACxB,WAAW,CAAE,OAAO,CACpB,MAAM,CAAE,OAAO,AACjB,CAAC,AAED,KAAK,8BAAC,CAAC,AACL,OAAO,CAAE,KAAK,CACd,aAAa,CAAE,GAAG,AACpB,CAAC,AAED,UAAU,8BAAC,CAAC,AACV,KAAK,CAAE,IAAI,AACb,CAAC,AAED,YAAY,8BAAC,CAAC,AACZ,QAAQ,CAAE,QAAQ,AACpB,CAAC,AAED,OAAO,8BAAC,CAAC,AACP,QAAQ,CAAE,QAAQ,CAClB,GAAG,CAAE,KAAK,CACV,KAAK,CAAE,KAAK,CACZ,KAAK,CAAE,KAAK,CACZ,MAAM,CAAE,KAAK,CACb,UAAU,CAAE,SAAS,CAAC,GAAG,CAAC,GAAG,CAAC,IAAI,OAAO,CAAC,CAC1C,eAAe,CAAE,MAAM,CACvB,MAAM,CAAE,IAAI,CACZ,aAAa,CAAE,GAAG,CAClB,gBAAgB,CAAE,OAAO,CACzB,WAAW,CAAE,OAAO,CACpB,MAAM,CAAE,OAAO,AACjB,CAAC,AAED,KAAK,8BAAC,CAAC,AACL,SAAS,CAAE,IAAI,CACf,MAAM,CAAE,KAAK,AACf,CAAC,AAED,WAAW,8BAAC,CAAC,AACX,QAAQ,CAAE,QAAQ,CAClB,KAAK,CAAE,IAAI,AACb,CAAC"
}